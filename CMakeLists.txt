cmake_minimum_required(VERSION 2.8)

project(bmif Fortran)

set(CMAKE_Fortran_MODULE_DIRECTORY ${CMAKE_BINARY_DIR}/mod)
set(CMAKE_MACOSX_RPATH 1)
set(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/lib")

add_library(${CMAKE_PROJECT_NAME} SHARED bmi.f90)

install(
  TARGETS ${CMAKE_PROJECT_NAME}
  DESTINATION lib)
install(
  FILES ${CMAKE_Fortran_MODULE_DIRECTORY}/${CMAKE_PROJECT_NAME}.mod
  DESTINATION include)
